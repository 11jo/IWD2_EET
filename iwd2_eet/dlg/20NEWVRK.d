BEGIN ~20NEWVRK~

IF ~NumTimesTalkedTo(0)~ THEN BEGIN 0
  SAY @36265
  IF ~Class(LastTalkedToBy,FIGHTER_ALL)~ THEN REPLY @36267 GOTO 2
  IF ~Class(LastTalkedToBy,THIEF_ALL)~ THEN REPLY @36269 GOTO 2
  IF ~Class(LastTalkedToBy,CLERIC_ALL)~ THEN REPLY @36270 GOTO 2
  IF ~Class(LastTalkedToBy,DRUID_ALL)
      !Class(LastTalkedToBy,SHAMAN)~ THEN REPLY @36271 GOTO 2
  IF ~Class(LastTalkedToBy,PALADIN_ALL)
      !Kit(LastTalkedToBy,BLACKGUARD)~ THEN REPLY @36272 GOTO 2
  IF ~Class(LastTalkedToBy,MAGE_ALL)~ THEN REPLY @36268 GOTO 2
  IF ~Class(LastTalkedToBy,SHAMAN)~ THEN REPLY @50007 GOTO 2
  IF ~Kit(LastTalkedToBy,BLACKGUARD)~ THEN REPLY @50008 GOTO 2
  IF ~~ THEN REPLY @36266 GOTO 1
  IF ~~ THEN REPLY @36273 GOTO 8
END

IF ~~ THEN BEGIN 1
  SAY @36274
  IF ~Global("SR_Recover_Blade","GLOBAL",3)~ THEN REPLY @36275 GOTO 3
  IF ~~ THEN REPLY @36276 GOTO 7
END

IF ~~ THEN BEGIN 2
  SAY @36277
  IF ~Global("SR_Recover_Blade","GLOBAL",3)~ THEN REPLY @36275 GOTO 3
  IF ~~ THEN REPLY @36276 GOTO 7
END

IF ~~ THEN BEGIN 3
  SAY @36278
  IF ~~ THEN REPLY @36279 DO ~AddXP2DA("IW2EX3E")
                              DisplayStringNoNameDlg(LastTalkedToBy,@36264)
                              AddJournalEntry(@36263,QUEST)~ GOTO 4
  IF ~~ THEN REPLY @36276 GOTO 7
END

IF ~~ THEN BEGIN 4
  SAY @36280
  IF ~Gender(LastTalkedToBy,MALE)~ THEN REPLY @36281 GOTO 5
  IF ~Gender(LastTalkedToBy,FEMALE)~ THEN REPLY @36281 GOTO 6
END

IF ~~ THEN BEGIN 5
  SAY @36282
  IF ~~ THEN REPLY @36283 GOTO 7
END

IF ~~ THEN BEGIN 6
  SAY @36284
  IF ~~ THEN REPLY @36283 GOTO 7
END

IF ~~ THEN BEGIN 7
  SAY @36285
  IF ~~ THEN REPLY @36286 DO ~Enemy()~ EXIT
END

IF ~~ THEN BEGIN 8
  SAY @36287
  IF ~Class(LastTalkedToBy,FIGHTER_ALL)~ THEN REPLY @36267 GOTO 2
  IF ~Class(LastTalkedToBy,MAGE_ALL)~ THEN REPLY @36268 GOTO 2
  IF ~Class(LastTalkedToBy,THIEF_ALL)~ THEN REPLY @36269 GOTO 2
  IF ~Class(LastTalkedToBy,CLERIC_ALL)~ THEN REPLY @36270 GOTO 2
  IF ~Class(LastTalkedToBy,DRUID_ALL)
      !Class(LastTalkedToBy,SHAMAN)~ THEN REPLY @36271 GOTO 2
  IF ~Class(LastTalkedToBy,PALADIN_ALL)
      !Kit(LastTalkedToBy,BLACKGUARD)~ THEN REPLY @36272 GOTO 2
  IF ~Class(LastTalkedToBy,SHAMAN)~ THEN REPLY @50007 GOTO 2
  IF ~Kit(LastTalkedToBy,BLACKGUARD)~ THEN REPLY @50008 GOTO 2
  IF ~~ THEN REPLY @36266 GOTO 1
END
