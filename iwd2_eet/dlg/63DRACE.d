BEGIN ~63DRACE~

IF WEIGHT #1
~NumTimesTalkedTo(0)~ THEN BEGIN 0
  SAY @30104
  IF ~~ THEN REPLY @30105 GOTO 1
  IF ~~ THEN REPLY @30106 GOTO 8
  IF ~~ THEN REPLY @30107 EXIT
END

IF ~~ THEN BEGIN 1
  SAY @30108
  IF ~~ THEN REPLY @30111 GOTO 7
  IF ~~ THEN REPLY @30109 GOTO 2
  IF ~~ THEN REPLY @30110 GOTO 4
  IF ~Global("SH_Stop_Guards","GLOBAL",3)
      !Global("SH_Drace_Allow","GLOBAL",1)~ THEN REPLY @30112 GOTO 10
END

IF ~~ THEN BEGIN 2
  SAY @30113
  IF ~~ THEN REPLY @30120 GOTO 3
  IF ~~ THEN REPLY @30110 GOTO 4
  IF ~~ THEN REPLY @30111 GOTO 7
END

IF ~~ THEN BEGIN 3
  SAY @30121
  IF ~~ THEN REPLY @30122 GOTO 4
  IF ~~ THEN REPLY @30111 GOTO 7
  IF ~~ THEN REPLY @2155 EXIT
END

IF ~~ THEN BEGIN 4
  SAY @30123
  IF ~PartyHasItem("z6gendp")~ THEN REPLY @30124 GOTO 5
  IF ~!PartyHasItem("z6gendp")~ THEN REPLY @30124 GOTO 6
  IF ~~ THEN REPLY @30107 EXIT
END

IF ~~ THEN BEGIN 5
  SAY @30125
  IF ~~ THEN REPLY @30126 EXIT
END

IF ~~ THEN BEGIN 6
  SAY @30127
  IF ~~ THEN REPLY @30126 EXIT
END

IF ~~ THEN BEGIN 7
  SAY @30128
  IF ~~ THEN REPLY @30109 GOTO 2
  IF ~~ THEN REPLY @30110 GOTO 4
  IF ~~ THEN REPLY @2155 EXIT
END

IF ~~ THEN BEGIN 8
  SAY @30129
  IF ~~ THEN REPLY @30111 GOTO 18
  IF ~~ THEN REPLY @30130 GOTO 9
  IF ~~ THEN REPLY @30126 DO ~SetGlobal("SH_Rude_Dracein","GLOBAL",1)~ EXIT
END

IF ~~ THEN BEGIN 9
  SAY @30131
  IF ~~ THEN REPLY @30132 DO ~Enemy()~ EXIT
END

IF ~~ THEN BEGIN 10
  SAY @30133
  IF ~PartyHasItem("z6gendp")~ THEN REPLY @30134 GOTO 11
  IF ~!PartyHasItem("z6gendp")~ THEN REPLY @30134 GOTO 12
END

IF ~~ THEN BEGIN 11
  SAY @30135
  IF ~~ THEN REPLY @30136 DO ~SetGlobal("SH_Drace_Allow","GLOBAL",1)~ EXIT
END

IF ~~ THEN BEGIN 12
  SAY @30137
  IF ~CheckStatGT(LastTalkedToBy,13,CHR)~ THEN REPLY @30138 GOTO 13
  IF ~CheckStatLT(LastTalkedToBy,14,CHR)~ THEN REPLY @30138 GOTO 14
  IF ~~ THEN REPLY @30139 GOTO 9
END

IF ~~ THEN BEGIN 13
  SAY @30140
  IF ~~ THEN REPLY @30136 DO ~SetGlobal("SH_Drace_Allow","GLOBAL",1)~ EXIT
END

IF ~~ THEN BEGIN 14
  SAY @30141
  IF ~~ THEN REPLY @30126 EXIT
END

IF WEIGHT #2
~NumTimesTalkedToGT(0)~ THEN BEGIN 15
  SAY @30142
  IF ~~ THEN REPLY @30109 GOTO 2
  IF ~~ THEN REPLY @30110 GOTO 4
  IF ~Global("SH_Stop_Guards","GLOBAL",3)
      !Global("SH_Drace_Allow","GLOBAL",1)~ THEN REPLY @30112 GOTO 10
END

IF WEIGHT #0
~Global("SH_Rude_Dracein","GLOBAL",1)~ THEN BEGIN 16
  SAY @30143
  IF ~~ THEN REPLY @30144 DO ~SetGlobal("SH_Rude_Dracein","GLOBAL",0)~ GOTO 17
  IF ~~ THEN REPLY @30145 GOTO 9
  IF ~~ THEN REPLY @30107 EXIT
END

IF ~~ THEN BEGIN 17
  SAY @30146
  IF ~~ THEN REPLY @30109 GOTO 2
  IF ~~ THEN REPLY @30110 GOTO 4
  IF ~Global("SH_Stop_Guards","GLOBAL",3)
      !Global("SH_Drace_Allow","GLOBAL",1)~ THEN REPLY @30112 GOTO 10
END

IF ~~ THEN BEGIN 18
  SAY @30128
  IF ~~ THEN REPLY @30130 GOTO 9
  IF ~~ THEN REPLY @2188 DO ~SetGlobal("SH_Rude_Dracein","GLOBAL",1)~ EXIT
END
